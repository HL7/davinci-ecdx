resourceType: Task
id: query-complete-contained
contained:
  - resourceType: Bundle
    id: results
    type: searchset
    total: 1
    link:
      - relation: self
        url: >-
          http://example.org/new-payor/fhir/Condition?patient=Patient/pat1&clinical-status=active&code:below=http%3A%2F%2Fsnomed.info%2Fsct%7C73211009
    entry:
      - fullUrl: 'http://local.fhir.org:960/r4/Condition/example'
        resource:
          resourceType: Condition
          id: example
          meta:
            versionId: '1'
            lastUpdated: '2018-11-12T03:34:46.552Z'
          text:
            status: generated
            div: >-
              <div xmlns="http://www.w3.org/1999/xhtml">Severe burn of left ear
              (Date: 24-May 2012)</div>
          clinicalStatus:
            coding:
              - system: 'http://terminology.hl7.org/CodeSystem/condition-clinical'
                code: active
          verificationStatus:
            coding:
              - system: 'http://terminology.hl7.org/CodeSystem/condition-ver-status'
                code: confirmed
          category:
            - coding:
                - system: 'http://terminology.hl7.org/CodeSystem/condition-category'
                  code: encounter-diagnosis
                  display: Encounter Diagnosis
                - system: 'http://snomed.info/sct'
                  code: '359642000'
                  display: Type 2 diabetes mellitus in nonobese
          subject:
            reference: 'http://example.org/new-payer/fhir/Patient/pat1'
          onsetDateTime: '2012-05-24'
        search:
          mode: match
  - resourceType: CommunicationRequest
    id: cdex-example-resource-request
    identifier:
      - system: 'http://www.jurisdiction.com/insurer/123456'
        value: ABC123
    status: active
    category:
      - coding:
          - system: 'http://example.org/messagetypes'
            code: SolicitedAttachmentRequest
    priority: routine
    subject:
      reference: 'http://example.org/new-payer/fhir/Patient/pat1'
    about:
      - reference: 'http://example.org/new-payer/fhir/Claim/123'
    encounter:
      reference: 'http://example.org/new-payer/fhir/Encounter/cdex-example-encounter'
    payload:
      - contentString: Please provide the patient's conditions.
    occurrenceDateTime: '2020-07-30T20:07:15-06:00'
    authoredOn: '2020-07-30T20:07:15-06:00'
    requester:
      reference: 'http://example.org/new-payer/fhir/Organization/hl7pay'
    recipient:
      - reference: 'http://example.org/new-payer/fhir/Organization/hl7pay'
    sender:
      reference: 'http://example.org/provider/fhir/Organization/hl7prov'
basedOn:
  - reference: '#cdex-example-resource-request'
focus:
  reference: '#cdex-example-resource-request'
status: completed
intent: order
code:
  coding:
    - system: 'http://hl7.org/fhir/us/davinci-hrex/CodeSystem/hrex-temp'
      code: data-request
for:
  reference: 'http://example.org/new-payer/fhir/Patient/pat1'
authoredOn: '2020-07-30T20:07:15-06:00'
requester:
  reference: 'http://example.org/new-payer/fhir/Organization/hl7pay'
owner:
  reference: 'http://example.org/provider/fhir/Organization/hl7prov'
reasonCode:
  text: Support prior authorization decision-making
reasonReference:
  reference: 'http://example.org/new-payer/fhir/Claim/123'
input:
  - type:
      coding:
        - system: 'http://hl7.org/fhir/us/davinci-hrex/CodeSystem/hrex-temp'
          code: data-query
    valueString: >-
      Condition?patient=Patient/pat1&clinical-status=active&code:below=http%3A%2F%2Fsnomed.info%2Fsct%7C73211009
output:
  - type:
      coding:
        - system: 'http://hl7.org/fhir/us/davinci-hrex/CodeSystem/hrex-temp'
          code: data-value
    valueReference:
      reference: '#results'

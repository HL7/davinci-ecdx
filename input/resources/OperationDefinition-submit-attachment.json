{
    "resourceType": "OperationDefinition",
    "id": "submit-attachment",
    "url": "http://hl7.org/fhir/us/davinci-cdex/OperationDefinition/submit-attachment",
    "version": "4.0.1",
    "name": "SubmitAttachment",
    "title": "Submit Attachment Operation",
    "status": "draft",
    "kind": "operation",
    "date": "2021-12-02T20:24:41-08:00",
    "description": "This operation is used to submit attachments (additional information) for Claims or Prior Authorization. This operation accepts the clinical/administrative attachments and the necessary information needed to associate them to the claim or prior authorization, and returns a transaction layer HTTP response.  The operation may be invoked *before, at the same time as, or after* the claim or pre-authorization has been supplied to the Payer.  This operation can be used by any HTTP endpoint, not just FHIR RESTful servers.\n\nThe input parameters are:\n1. One or more attachments as FHIR Resources\n    - Optionally, one or more unique line item numbers associated with the attachment\n    - Optionally, the code, free text, or search string for information that was requested\n1. Data elements for association to the Claim/Prior Authorization\n    - A unique identifer that ties the attachment(s) back to the claim or prior authorization. (referred to as the \"re-association tracking control numbers\")*\n    - What is the attachements are for:\n      - Claim\n      - Prior Authorization\n    - Optionally, a unique payer identifier\n    - A unique organization/location identifier (e.g., NPI)\n    - A unique provider identifier (e.g., NPI)\n    - A unique Patient member identifier\n    - A Date of Service\n    - A Flag indicating whether the operation is the last attachment submission for the claim or prior authorization.\n\nThere are no output parameters.",
    "code": "submit-attachment",
    "comment": "\\*Note that an *unsolicited* Claim attachment implies that the provider assigns the tracking control number on the claim and also on the submitted attachments for that claim for association. A *solicited* Claim attachments are when the payer assigns the Claim control number and sends the provider a request for additional information for that specific claim. Similarly for Prior Authorization, the prior auth identifier is provider assigned when the attachments are sent upon prior auth generation, and the prior auth identifier is the payer assigned control number when the attachments are in response to a request for additional information by the payer.\n\nThe following rules apply when using `$submit-attachment`:\n* The operation's endpoint **SHALL** only accepts `POST` transactions - any other HTTP method **SHALL** result in an HTTP error.\n* The ServiceDate parameter **SHALL** be present and precise to the day if the attachment is for a claim.  It is optional if the attachment is for a prior authorization.\n* The `Attachment.ItemID` and `Attachment.Code` parameters are associated with the attachements in `Attachment.Content`.   If `Attachment.ItemID` is not present, then the attachment is associated with to the entire claim or prior authorization.\n* For the `Attachment.Content` parameter, Servers **SHALL** support  DocumentReference resource type and **SHOULD** support other types.\n  * The DocumentReference resources can represent the referenced content using either an address where the document can be retrieved using `DocumentReference.attachment.url` or the content as inline base64 encoded data using `DocumentReference.attachment.data`.  The server system is not required to support both an address and inline base64 encoded data, but **SHALL** support at least one of these elements.\n  * These capabilities **SHOULD** be discoverable and documented by the server (for example, in the CapabilityStatement for FHIR Servers).\n* The default meaning when the `Final` parameter is omitted is Final=\"true\" - the operation is the last attachment submission (solicited or unsolicited) for the claim or prior authorization.\n* When processing messages, a server may return one of several status codes:\n  * **200 OK**: Indicates that the server has accepted the clinical attachments.\n    * If the attachments can not be associated to an *existing* claim or member, the server **SHOULD** return an [OperationOutcome](http://hl7.org/fhir/operationoutcome.html) to inform the Data Source that the attachments are being held for subsequent association to a claim or prior-authorization.\n  * **4xx**: Indicates some error in the submission. The client **SHOULD** interpret a 4xx response to indicate that there is no point resubmitting the unaltered operation,\n  * **5xx**: Indicates some system error. The client **SHOULD** interpret a 5xx response to indicate an unexpected error occurred on the part of the server, with the implication that it may be appropriate to resubmit the original operation.\n  *  The server **SHOULD** return an [OperationOutcome](http://hl7.org/fhir/operationoutcome.html) with additional error information if the response code is 400 or greater. For example, if the payer has no knowledge of the claim or prior authorization, the OperationOurtcome can alert submitter to check whether they sent it to the wrong payer.\n\nSee the [Attachments](attachments.html) page for additional guidance and examples.\n",
    "resource": [
        "Claim"
    ],
    "system": true,
    "type": false,
    "instance": false,
    "parameter": [
        {
            "name": "TrackingId",
            "use": "in",
            "min": 1,
            "max": "1",
            "documentation": "Identifer that ties the attachment(s) back to the claim or prior authorization. This value is referred to as the \"re-association tracking control numbers\"*",
            "type": "string"
        },
        {
            "name": "AttachTo",
            "use": "in",
            "min": 1,
            "max": "1",
            "documentation": "Whether the additional information is needed for a claim or for prior authorization.",
            "type": "code",
            "binding": {
                "strength": "required",
                "valueSet": "http://hl7.org/fhir/us/davinci-cdex/ValueSet/cdex-claim-use"
            }
        },
        {
            "name": "PayerId",
            "use": "in",
            "min": 0,
            "max": "1",
            "documentation": "The receiving payer identifier. Some endpoints may support multiple payers.  Therefore, this identifier may be required when submitting attachments.",
            "type": "Identifier"
        },
        {
            "name": "OrganizationId",
            "use": "in",
            "min": 1,
            "max": "1",
            "documentation": "Sending organization/location identifier (e.g., NPI)",
            "type": "Identifier"
        },
        {
            "name": "ProviderId",
            "use": "in",
            "min": 1,
            "max": "1",
            "documentation": "Sending provider identifier (e.g., NPI)",
            "type": "Identifier"
        },
        {
            "name": "MemberId",
            "use": "in",
            "min": 1,
            "max": "1",
            "documentation": "Patient member identifier",
            "type": "Identifier"
        },
        {
            "name": "ServiceDate",
            "use": "in",
            "min": 0,
            "max": "1",
            "documentation": "Date of service or starting date of the service for the claim or prior authorization.  This parameter **SHALL** be present and precise to the day if the attachment is for a claim.  It is optional if the attachment is for a prior authorization.",
            "type": "date"
        },
        {
            "name": "Attachment",
            "use": "in",
            "min": 0,
            "max": "*",
            "documentation": "The attachments being communicated for a Claim or Prior Authorization. They are applied to the ItemId (line items) and/or Code (LOINC) parameters if present.  If no ItemId is present, then the attachment is applied to the entire claim or prior authorization.",
            "part": [
                {
                    "name": "LineItem",
                    "use": "in",
                    "min": 0,
                    "max": "*",
                    "documentation": "Claim/prior authorization line item for service in the claim or prior authorization. For a *solicited* Claim or Prior Authorization attachment, this value should be the same as the line items communicated in the request.",
                    "type": "string"
                },
                {
                    "name": "Code",
                    "use": "in",
                    "min": 0,
                    "max": "1",
                    "documentation": "LOINC code to identify the specific kind of information being communicated (e.g., a discharge summary or diagnostic imaging report).  For a *solicited* Claim or Prior Authorization attachment, this value should be the same as the LOINC communicated in the request.  The CodeableConcept `text` element is used for a FHIR RESTful search query or a free text request.",
                    "type": "CodeableConcept",
                    "binding": {
                        "strength": "extensible",
                        "valueSet": "http://hl7.org/fhir/us/davinci-cdex/ValueSet/cdex-attachment"
                    }
                },
                {
                    "name": "Content",
                    "use": "in",
                    "min": 1,
                    "max": "1",
                    "documentation": "Attachment as a FHIR resources.  Non-FHIR attachment data is conveyed using the DocumentReference or Binary resource. Servers **SHALL** support  DocumentReference resource type and **SHOULD** support other types.",
                    "type": "Resource"
                }
            ]
        },
        {
            "name": "Final",
            "use": "in",
            "min": 0,
            "max": "1",
            "documentation": "Flag to indicate whether the operation is the last attachment submission (solicited or unsolicited) for the claim or prior authorization.  If Final = \"true\", the Data Source has no more attachments to submit. This is the default meaning if this parameter is omitted. If Final = \"false\", the Data Source expects to submit more attachments in subsequent operations.   Payers typically anticipate a single submission and may discourage multiple submissions.",
            "type": "boolean"
        }
    ]
}